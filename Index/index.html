<!DOCTYPE html>
<html>
    <head>
        <title>Giphy API</title>
    </head>
    <body>

        <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
            <a class="navbar-brand" href="#">Giphy Search Api</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
                aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contact</a>
                    </li>
                </ul>
            </div>
        </nav>

        <div class="container">
            <header>
                <form id="search-form">
                    <input id="search-input" type="text" placeholder="search">
                    <button type="submit">Search</button>
                </form>
                <link rel="stylesheet" href="CSS/styles.scss"/>
            </header>

            <div id="results" class="results">

            </div>
        </div>


        <script>

            const searchForm = document.getElementById('search-form')
            const searchInput = document.getElementById('search-input')
            const resultsEl = document.getElementById('results')

            searchForm.addEventListener('submit', function(e) {
                e.preventDefault()
                const q = searchInput.value 
                search(q)

            })

            function search(q) {
                const apikey = 'z26ixcTXUlwPgGGZzb9ytIyvwtIIfImV'
                const path = `https://api.giphy.com/v1/gifs/search?api_key=${apikey}&q=${q}`
        
                fetch(path).then(function(res) {
                    return res.json()
                }).then(function(json) {
                    console.log(json.data[0].images.fixed_width.url)
                    let resultsHTML = ''

                    json.data.forEach(function(obj) {
                        console.log(obj.images.fixed_width.url)

                        const url = obj.images.fixed_width.url
                        const width = obj.images.fixed_width.width
                        const height = obj.images.fixed_width.height
                        const title = obj.title
                    
                        resultsHTML += `<img 
                            class="item"
                            src="${url}" 
                            width="${width}" 
                            height="${height}"
                            alt="${title}"
                            >`
                         })

                        resultsEl.innerHTML = resultsHTML
                            }).catch(function(err) {
                            console.log(err.message)
                            })
                            }

            

        </script>



    </body>
</html>